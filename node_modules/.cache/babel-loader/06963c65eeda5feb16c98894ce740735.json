{"ast":null,"code":"import _regeneratorRuntime from\"/home/abdel/Desktop/parking-reservation-front-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/abdel/Desktop/parking-reservation-front-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/abdel/Desktop/parking-reservation-front-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{makeStyles}from'@material-ui/core/styles';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemSecondaryAction from'@material-ui/core/ListItemSecondaryAction';import ListItemText from'@material-ui/core/ListItemText';import ListItemAvatar from'@material-ui/core/ListItemAvatar';import Checkbox from'@material-ui/core/Checkbox';import Avatar from'@material-ui/core/Avatar';import axios from'axios';import authHeader from\"../securityUtils/authorisationHeader\";import{jsx as _jsx}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:'100%',maxWidth:360,backgroundColor:theme.palette.background.paper,border:'solid',borderRadius:15}};});var slots=[{key:1,startTime:\"8:00\",endTime:\"10:00\"},{key:2,startTime:\"10:00\",endTime:\"12:00\"},{key:3,startTime:\"14:00\",endTime:\"16:00\"},{key:4,startTime:\"16:00\",endTime:\"18:00\"}];var SlotTime=function SlotTime(_ref){var setTimeSelected=_ref.setTimeSelected,setTimeValue=_ref.setTimeValue,seat=_ref.seat,dateValue=_ref.dateValue;var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todayReservation=_useState4[0],seTodayReservation=_useState4[1];var _useState5=useState(-1),_useState6=_slicedToArray(_useState5,2),selectedIndex=_useState6[0],setSelectedIndex=_useState6[1];function handleChange(e,index){setSelectedIndex(index);setTimeSelected(true);setTimeValue(index);}useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"\".concat(dateValue.getFullYear(),\"-\").concat(dateValue.getMonth()+1,\"-\").concat(dateValue.getDate()));_context.next=3;return axios({url:\"/api/seats/\".concat(seat),Authorisation:authHeader,method:\"post\",data:{date:\"\".concat(dateValue.getFullYear(),\"-\").concat(dateValue.getMonth()+1,\"-\").concat(dateValue.getDate())}}).then(function(response){var reservations=response.data;console.log(reservations);seTodayReservation(reservations);}).catch(function(error){console.log(error);});case 3:case\"end\":return _context.stop();}}},_callee);})),[dateValue]);return/*#__PURE__*/_jsx(List,{dense:true,className:classes.root,children:slots.map(function(slot){var labelId=\"chose a slot\";return/*#__PURE__*/_jsx(ListItem,{button:true,selected:selectedIndex===slot.key,onClick:function onClick(e){return handleChange(e,slot.key);},disabled:todayReservation.filter(function(item){return item.time===slot.key;}).length>0?true:false,children:/*#__PURE__*/_jsx(ListItemText,{id:slot.key,primary:\"\".concat(slot.startTime,\"-\").concat(slot.endTime),align:\"center\"})},slot.key);})});};export default SlotTime;","map":{"version":3,"sources":["/home/abdel/Desktop/parking-reservation-front-react/src/components/SlotTime.js"],"names":["React","useEffect","useState","makeStyles","List","ListItem","ListItemSecondaryAction","ListItemText","ListItemAvatar","Checkbox","Avatar","axios","authHeader","useStyles","theme","root","width","maxWidth","backgroundColor","palette","background","paper","border","borderRadius","slots","key","startTime","endTime","SlotTime","setTimeSelected","setTimeValue","seat","dateValue","classes","selected","setSelected","todayReservation","seTodayReservation","selectedIndex","setSelectedIndex","handleChange","e","index","console","log","getFullYear","getMonth","getDate","url","Authorisation","method","data","date","then","response","reservations","catch","error","map","slot","labelId","filter","item","time","length"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Avatar from '@material-ui/core/Avatar';\nimport axios from 'axios';\nimport authHeader from \"../securityUtils/authorisationHeader\"\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n    border:'solid',\n    borderRadius:15\n  },\n}));\nconst slots=[\n{key:1,startTime:\"8:00\",endTime:\"10:00\"},\n{key:2,startTime:\"10:00\",endTime:\"12:00\"},\n{key:3,startTime:\"14:00\",endTime:\"16:00\"},\n{key:4,startTime:\"16:00\",endTime:\"18:00\"},\n\n];\n const SlotTime=({setTimeSelected,setTimeValue,seat,dateValue}) =>{\n  const classes = useStyles();\n  const [selected , setSelected] = useState(\"\");\n  const [todayReservation,seTodayReservation] = useState([]);\n\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n\n  function handleChange(e,index){\n    setSelectedIndex(index);\n    setTimeSelected(true);\n    setTimeValue(index);\n  }\n  useEffect(async ()=>{\n    console.log(`${dateValue.getFullYear()}-${dateValue.getMonth()+1}-${dateValue.getDate()}`);\n    await axios(\n      { \n        url:`/api/seats/${seat}`,\n        Authorisation:authHeader,\n        method:\"post\",\n        data:{date:`${dateValue.getFullYear()}-${dateValue.getMonth()+1}-${dateValue.getDate()}`}\n    })\n    .then(response=>{\n        const reservations = response.data;\n        console.log(reservations);\n        seTodayReservation(reservations);        \n    })\n    .catch(error=>{\n        console.log(error);\n    });\n},[dateValue]);\n  return (\n    <List dense className={classes.root} >\n      {slots.map((slot) => {\n        const labelId = `chose a slot`;\n        return (\n          <ListItem key={slot.key} button\n          selected={selectedIndex === slot.key}\n          onClick={(e)=>handleChange(e,slot.key)}\n          disabled={todayReservation.filter(item=>item.time===slot.key).length>0?true:false}\n          >\n            <ListItemText id={slot.key} primary={`${slot.startTime}-${slot.endTime}`} align=\"center\"/>\n          </ListItem>\n        );\n      })}\n    </List>\n  );\n}\nexport default SlotTime;"]},"metadata":{},"sourceType":"module"}