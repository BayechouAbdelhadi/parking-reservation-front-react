{"ast":null,"code":"import _regeneratorRuntime from\"/home/abdel/Desktop/parking-reservation-front-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/abdel/Desktop/parking-reservation-front-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/abdel/Desktop/parking-reservation-front-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/abdel/Desktop/parking-reservation-front-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState,useEffect}from'react';import{makeStyles}from'@material-ui/core/styles';import styled from'styled-components';import{findTodayReservation}from\"../actions/reservationActions\";import{useStore,useSelector}from\"react-redux\";import axios from'axios';import authHeader from\"../securityUtils/authorisationHeader\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{textAlign:'center',justifyContent:'center',backgroundColor:'antiquewhite',padding:'10px',border:'solid brown',borderRadius:'8%'},progress:{width:'105px',height:'25px',margin:'0 auto',border:'double'},bar:{width:'1%',height:'30px',backgroundColor:'green'},text:{color:\"white\",fontSize:12,fontWeight:'bold'}};});var Bar=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nbackground-color:\",\";\\nwidth:\",\"px;\\nheight:20px;\\ntext-align:center;\\n\\n\"])),function(props){return props.nbBookedSeats<=2?'green':2<props.nbBookedSeats&&props.nbBookedSeats<=3?'#FFA500':3<props.nbBookedSeats&&props.nbBookedSeats<=4?'#800000':'grey';},function(props){return 25*props.nbBookedSeats;});var Status=function Status(_ref){var seat=_ref.seat;var classes=useStyles();var store=useStore();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todayReservation=_useState2[0],seTodayReservation=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),nbBookedSeats=_useState4[0],setNbBookedSeats=_useState4[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/seats/\".concat(seat),{\"Authorisation\":authHeader}).then(function(response){var reservations=response.data;seTodayReservation(reservations);setNbBookedSeats(reservations.length);}).catch(function(error){console.log(error);});case 2:case\"end\":return _context.stop();}}},_callee);})),[]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[seat,nbBookedSeats<4?/*#__PURE__*/_jsxs(\"h3\",{children:[4-nbBookedSeats==1?\"There is one  free seat \":\"there are \".concat(4-nbBookedSeats,\" free seats \"),\" for today\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"There are no free seats for today\"}),\"  \",/*#__PURE__*/_jsx(\"h3\",{children:\"but you can still book for another day\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.progress,children:/*#__PURE__*/_jsx(Bar,{nbBookedSeats:nbBookedSeats,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.text,children:[nbBookedSeats*25,\"%\"]})})})]});};export default Status;","map":{"version":3,"sources":["/home/abdel/Desktop/parking-reservation-front-react/src/components/Status.js"],"names":["React","useState","useEffect","makeStyles","styled","findTodayReservation","useStore","useSelector","axios","authHeader","useStyles","theme","root","textAlign","justifyContent","backgroundColor","padding","border","borderRadius","progress","width","height","margin","bar","text","color","fontSize","fontWeight","Bar","div","props","nbBookedSeats","Status","seat","classes","store","todayReservation","seTodayReservation","setNbBookedSeats","get","then","response","reservations","data","length","catch","error","console","log"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport styled from 'styled-components';\nimport { findTodayReservation } from \"../actions/reservationActions\";\nimport {useStore,useSelector} from \"react-redux\";\nimport axios from 'axios';\nimport authHeader from \"../securityUtils/authorisationHeader\"\n\n\n\nconst useStyles = makeStyles((theme) => ({\n    root:{\n        textAlign:'center',\n        justifyContent:'center',\n        backgroundColor:'antiquewhite',\n        padding:'10px',\n        border :'solid brown',\n        borderRadius:'8%' \n    },\n    progress: {\n        width: '105px',\n        height: '25px',\n        margin:'0 auto',\n        border:'double',\n    },\n    bar: {\n        width: '1%',\n        height: '30px',\n        backgroundColor: 'green',\n      },\n      text:{\n          color:\"white\",\n          fontSize:12,\n          fontWeight:'bold'   \n      }\n  }));\n  \nconst Bar = styled.div`\nbackground-color:${props=>props.nbBookedSeats<=2?'green':2<props.nbBookedSeats && props.nbBookedSeats <=3?'#FFA500':3<props.nbBookedSeats && props.nbBookedSeats<=4?'#800000':'grey'};\nwidth:${props=>25*props.nbBookedSeats}px;\nheight:20px;\ntext-align:center;\n\n`;\nconst Status =({seat})=>{\n    const classes=useStyles();\n    const store=useStore();\n    const [todayReservation,seTodayReservation] = useState([]);\n    const [nbBookedSeats,setNbBookedSeats]=useState(0);\n    useEffect(async ()=>{\n        await axios.get(`/api/seats/${seat}`,{\"Authorisation\":authHeader})\n        .then(response=>{\n            const reservations = response.data;\n            seTodayReservation(reservations);\n            setNbBookedSeats(reservations.length);\n            \n        })\n        .catch(error=>{\n            console.log(error);\n        });\n    },[]);\n    return(\n        <div className={classes.root}>\n            {seat}\n            {nbBookedSeats<4?\n            <h3>{ 4-nbBookedSeats==1? `There is one  free seat `: `there are ${ 4-nbBookedSeats} free seats `} for today</h3>\n            :<><h2>There are no free seats for today</h2>  <h3>but you can still book for another day</h3></>\n            }\n            <div className={classes.progress}>\n                <Bar nbBookedSeats={nbBookedSeats}><div className={classes.text} >{nbBookedSeats*25}%</div></Bar>\n            </div>\n        </div>\n\n\n    );\n}\n\nexport default Status ;"]},"metadata":{},"sourceType":"module"}